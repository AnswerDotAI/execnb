name: CI
on:  [workflow_dispatch, pull_request, push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: fastai/workflows/nbdev-ci@master
        with:
          version: ${{ matrix.version }}
          pre: 1
      - name: clone nbdev
        uses: actions/checkout@v3
        with:
          repository: 'fastai/nbdev'
          path: nbdev
      - name: Run nbdev tests
        run: |
          # git config --global user.email "${GH_EMAIL}"
          # git config --global user.name "${GH_USERNAME}"
          cd nbdev && pip install -Ue ".[dev]"
          nbdev_test
    
